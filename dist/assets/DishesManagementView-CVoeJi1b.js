import{d as yl,r,c as Z,o as wl,b as u,e as l,g as kl,w as xl,h as hl,i as n,t as o,s as f,j as i,v as m,k as $,F as R,l as F,y as ll,m as sl,n as S,f as B,p as v,q as c}from"./index-BRWVB6f9.js";const Cl={class:"dishes-page"},Vl={class:"container-fluid py-4"},Dl={class:"card shadow-sm border-0 mb-4 p-3"},Ul={class:"card-body"},Al={"aria-label":"breadcrumb",class:"mb-3"},Ml={class:"breadcrumb mb-0"},$l={class:"breadcrumb-item"},Sl={class:"row align-items-center"},Bl={class:"col-md-8"},ql={class:"text-muted mb-0"},Ll={class:"badge bg-primary"},Il={class:"badge bg-success"},Nl={class:"badge bg-warning"},jl={class:"badge bg-info"},El={class:"col-md-4 text-end"},Tl={class:"btn-group me-2"},Pl=["disabled"],Rl={class:"card mb-4"},Fl={class:"card-body"},zl={class:"row g-3"},Hl={class:"col-md-3"},Kl={class:"input-group"},Gl={class:"col-md-2"},Jl=["value"],Ol={class:"col-md-2"},Ql={class:"col-md-2"},Wl={class:"col-md-3"},Xl={class:"btn-group w-100",role:"group"},Yl=["disabled"],Zl={class:"btn-group",role:"group"},ls=["disabled"],ss={class:"dropdown-menu"},ts={class:"row mb-4"},es={class:"col-md-3"},os={class:"card"},as={class:"card-body text-center"},is={class:"card-title"},ns={class:"col-md-3"},ds={class:"card"},rs={class:"card-body text-center"},us={class:"card-title"},cs={class:"col-md-3"},ms={class:"card"},vs={class:"card-body text-center"},bs={class:"card-title"},ps={class:"col-md-3"},gs={class:"card"},_s={class:"card-body text-center"},fs={class:"card-title"},ys={key:0,class:"text-center py-5"},ws={key:1,class:"row"},ks={class:"card-header d-flex align-items-center"},xs={class:"form-check me-3"},hs=["id","value"],Cs={key:0,class:"dish-image-container me-3"},Vs=["src","alt"],Ds={key:1,class:"dish-placeholder me-3"},Us={class:"flex-grow-1"},As={class:"card-title mb-1"},Ms={class:"d-flex align-items-center gap-2 flex-wrap"},$s={key:0,class:"badge bg-warning"},Ss={class:"card-body"},Bs={class:"row"},qs={class:"col-12 mb-2"},Ls={class:"card-text text-muted small"},Is={class:"col-6"},Ns={class:"info-item-compact mb-2"},js={class:"info-item-compact mb-2"},Es={class:"col-6"},Ts={class:"info-item-compact mb-2"},Ps={class:"info-item-compact mb-2"},Rs={key:0,class:"mt-2"},Fs={class:"text-muted"},zs={class:"card-footer"},Hs={class:"d-flex justify-content-between align-items-center"},Ks={class:"d-flex gap-2"},Gs=["onClick"],Js=["onClick"],Os={class:"dropdown"},Qs={class:"dropdown-menu"},Ws=["onClick"],Xs=["onClick"],Ys=["onClick"],Zs=["onClick"],lt={key:2,class:"text-center py-5"},st={class:"modal-dialog modal-lg"},tt={class:"modal-content"},et={class:"modal-header"},ot={class:"modal-title"},at={class:"modal-body"},it={class:"row"},nt={class:"col-md-6"},dt={class:"mb-3"},rt={class:"col-md-6"},ut={class:"mb-3"},ct={class:"row"},mt={class:"col-md-6"},vt={class:"mb-3"},bt=["value"],pt={class:"col-md-6"},gt={class:"mb-3"},_t={class:"mb-3"},ft={class:"mb-3"},yt={class:"row"},wt={class:"col-md-4"},kt={class:"mb-3"},xt={class:"col-md-4"},ht={class:"mb-3"},Ct={class:"col-md-4"},Vt={class:"mb-3"},Dt={class:"mb-3"},Ut={class:"mb-3"},At={class:"row"},Mt={class:"col-md-6"},$t={class:"form-check"},St={class:"col-md-6"},Bt={class:"form-check"},qt={class:"modal-footer"},Lt=["disabled"],It={key:0,class:"spinner-border spinner-border-sm me-2"},Nt={class:"modal-dialog modal-xl"},jt={class:"modal-content"},Et={class:"modal-header"},Tt={class:"modal-title"},Pt={class:"modal-body"},Rt={class:"table-responsive"},Ft={class:"table table-striped"},zt={key:0},Ht={class:"btn-group",role:"group"},Kt=["onClick"],Gt=["onClick"],Jt={class:"modal-dialog modal-lg"},Ot={class:"modal-content"},Qt={class:"modal-header"},Wt={class:"modal-title"},Xt={class:"modal-body"},Yt={class:"row"},Zt={class:"col-md-6"},le={class:"mb-3"},se={class:"col-md-6"},te={class:"mb-3"},ee={class:"mb-3"},oe={class:"mb-3"},ae={class:"row"},ie={class:"col-md-4"},ne={class:"mb-3"},de={class:"col-md-4"},re={class:"mb-3"},ue={class:"col-md-4"},ce={class:"mb-3"},me={class:"mb-3"},ve={class:"row"},be={class:"col-md-6"},pe={class:"form-check"},ge={class:"col-md-6"},_e={class:"form-check"},fe={class:"modal-footer"},ye=["disabled"],we={key:0,class:"spinner-border spinner-border-sm me-2"},he=yl({__name:"DishesManagementView",setup(ke){const C=e=>new Promise((s,g)=>{const t=()=>{window.bootstrap&&window.bootstrap.Modal?s(new window.bootstrap.Modal(e)):setTimeout(t,100)};t()}),p=r([]),y=r([]),q=r([]),k=r([]),b=r([]),V=r(""),L=r(""),I=r(""),D=r(""),U=r("grid"),N=r(!1),j=r(!1),E=r(!1),A=r(!1),M=r(!1),w=r(null),T=r(),H=r(),P=r(),a=r({name:"",description:"",code:null,main_image_url:null,is_available:!0,sort_order:0,is_popular:!1,category_id:0,cooking_time:null,weight:null,calories:null,ingredients:null,department:"hot"}),d=r({name:"",description:null,price:0,image_url:null,weight:null,calories:null,is_default:!1,is_available:!0,sort_order:0,sku:null}),K=Z(()=>Array.isArray(p.value)?p.value.filter(e=>e.is_available).length:0),G=Z(()=>Array.isArray(p.value)?p.value.filter(e=>e.is_popular).length:0),x=async()=>{try{N.value=!0;const e=await v.getDishes();p.value=Array.isArray(e)?e:[],h()}catch(e){console.error("Ошибка загрузки блюд:",e),p.value=[],h()}finally{N.value=!1}},tl=async()=>{try{const e=await v.getCategories();y.value=e.categories||[]}catch(e){console.error("Ошибка загрузки категорий:",e)}},h=()=>{if(!Array.isArray(p.value)){k.value=[];return}let e=p.value;V.value&&(e=e.filter(s=>s.name.toLowerCase().includes(V.value.toLowerCase())||s.description.toLowerCase().includes(V.value.toLowerCase()))),L.value&&(e=e.filter(s=>s.category_id===parseInt(L.value))),I.value&&(e=e.filter(s=>s.department===I.value)),D.value==="available"?e=e.filter(s=>s.is_available):D.value==="unavailable"?e=e.filter(s=>!s.is_available):D.value==="popular"&&(e=e.filter(s=>s.is_popular)),k.value=e},J=()=>{U.value=U.value==="grid"?"list":"grid"},O=async()=>{A.value=!1,a.value={name:"",description:"",code:null,main_image_url:null,is_available:!0,sort_order:0,is_popular:!1,category_id:0,cooking_time:null,weight:null,calories:null,ingredients:null,department:"hot"},(await C(T.value)).show()},el=async e=>{A.value=!0,a.value={...e},(await C(T.value)).show()},Q=async()=>{try{j.value=!0,A.value?await v.updateDish(a.value.id,a.value):await v.createDish(a.value);const e=T.value,s=window.bootstrap?.Modal?.getInstance(e);s?s.hide():e.querySelector('[data-bs-dismiss="modal"]')?.click(),await x()}catch(e){console.error("Ошибка сохранения блюда:",e)}finally{j.value=!1}},ol=async e=>{if(confirm(`Вы уверены, что хотите удалить блюдо "${e.name}"?`))try{await v.deleteDish(e.id),await x()}catch(s){console.error("Ошибка удаления блюда:",s)}},al=async e=>{const s={...e,name:`${e.name} (копия)`,code:null},{id:g,created_at:t,updated_at:_,..._l}=s;try{await v.createDish(_l),await x()}catch(fl){console.error("Ошибка дублирования блюда:",fl)}},il=async e=>{try{await v.updateDishAvailability(e.id,!e.is_available),e.is_available=!e.is_available}catch(s){console.error("Ошибка изменения доступности:",s)}},nl=async e=>{try{await v.updateDish(e.id,{is_popular:!e.is_popular}),e.is_popular=!e.is_popular}catch(s){console.error("Ошибка изменения популярности:",s)}},dl=()=>{Array.isArray(k.value)?b.value=k.value.map(e=>e.id):b.value=[]},W=async e=>{try{for(const s of b.value)await v.updateDishAvailability(s,e);b.value=[],await x()}catch(s){console.error("Ошибка массового изменения доступности:",s)}},X=async e=>{try{for(const s of b.value)await v.updateDish(s,{is_popular:e});b.value=[],await x()}catch(s){console.error("Ошибка массового изменения популярности:",s)}},rl=async()=>{if(confirm(`Вы уверены, что хотите удалить ${b.value.length} блюд?`))try{for(const e of b.value)await v.deleteDish(e);b.value=[],await x()}catch(e){console.error("Ошибка массового удаления:",e)}},z=async e=>{try{w.value=e,console.log("Loading variations for dish:",e.id,e.name);const s=await v.getDishVariations(e.id);console.log("Received variations data:",s),q.value=s,(await C(H.value)).show()}catch(s){console.error("Ошибка загрузки вариаций:",s),q.value=[]}},ul=async()=>{M.value=!1,d.value={name:"",description:null,price:0,image_url:null,weight:null,calories:null,is_default:!1,is_available:!0,sort_order:0,sku:null},(await C(P.value)).show()},cl=async e=>{M.value=!0,d.value={...e},(await C(P.value)).show()},Y=async()=>{if(w.value)try{E.value=!0,M.value?await v.updateDishVariation(w.value.id,d.value.id,d.value):await v.createDishVariation(w.value.id,d.value);const e=P.value,s=window.bootstrap?.Modal?.getInstance(e);s?s.hide():e.querySelector('[data-bs-dismiss="modal"]')?.click(),await z(w.value)}catch(e){console.error("Ошибка сохранения вариации:",e)}finally{E.value=!1}},ml=async e=>{if(confirm(`Вы уверены, что хотите удалить вариацию "${e.name}"?`))try{await v.deleteDishVariation(w.value.id,e.id),await z(w.value)}catch(s){console.error("Ошибка удаления вариации:",s)}},vl=e=>{const s=y.value.find(g=>g.id===e);return s?s.name:"Без категории"},bl=e=>y.value.find(g=>g.id===e)?"bg-primary":"bg-secondary",pl=e=>({bar:"Бар",cold:"Холодный цех",hot:"Горячий цех",dessert:"Десерты",grill:"Гриль",bakery:"Выпечка"})[e]||e,gl=e=>({bar:"bg-info",cold:"bg-primary",hot:"bg-danger",dessert:"bg-warning",grill:"bg-success",bakery:"bg-secondary"})[e]||"bg-secondary";return wl(async()=>{await Promise.all([x(),tl()])}),(e,s)=>{const g=hl("router-link");return c(),u("div",Cl,[l("div",Vl,[l("div",Dl,[l("div",Ul,[l("nav",Al,[l("ol",Ml,[l("li",$l,[kl(g,{to:"/dashboard",class:"text-decoration-none text-dark"},{default:xl(()=>s[32]||(s[32]=[l("i",{class:"bi bi-house me-1"},null,-1),n(" Главная ")])),_:1,__:[32]})]),s[33]||(s[33]=l("li",{class:"breadcrumb-item active text-muted","aria-current":"page"},"Управление блюдами",-1))])]),l("div",Sl,[l("div",Bl,[s[38]||(s[38]=l("h1",{class:"h2 mb-2 d-flex align-items-center"},[l("i",{class:"bi bi-egg-fried me-2 text-primary"}),n(" Управление блюдами ")],-1)),l("p",ql,[s[34]||(s[34]=n(" Всего блюд: ")),l("span",Ll,o(Array.isArray(p.value)?p.value.length:0),1),s[35]||(s[35]=n(" • Доступных: ")),l("span",Il,o(K.value),1),s[36]||(s[36]=n(" • Популярных: ")),l("span",Nl,o(G.value),1),s[37]||(s[37]=n(" • Категорий: ")),l("span",jl,o(Array.isArray(y.value)?y.value.length:0),1)])]),l("div",El,[l("div",Tl,[l("button",{class:f(["btn btn-outline-secondary btn-sm",{active:U.value==="grid"}]),onClick:J},s[39]||(s[39]=[l("i",{class:"bi bi-grid-3x3-gap"},null,-1)]),2),l("button",{class:f(["btn btn-outline-secondary btn-sm",{active:U.value==="list"}]),onClick:J},s[40]||(s[40]=[l("i",{class:"bi bi-list-ul"},null,-1)]),2)]),l("button",{onClick:O,class:"btn btn-primary",disabled:N.value},s[41]||(s[41]=[l("i",{class:"bi bi-plus-circle me-1"},null,-1),n(" Добавить блюдо ")]),8,Pl)])])])]),l("div",Rl,[l("div",Fl,[l("div",zl,[l("div",Hl,[l("div",Kl,[s[42]||(s[42]=l("span",{class:"input-group-text"},[l("i",{class:"bi bi-search"})],-1)),i(l("input",{type:"text",class:"form-control",placeholder:"Поиск блюд...","onUpdate:modelValue":s[0]||(s[0]=t=>V.value=t),onInput:h},null,544),[[m,V.value]])])]),l("div",Gl,[i(l("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=t=>L.value=t),onChange:h},[s[43]||(s[43]=l("option",{value:""},"Все категории",-1)),(c(!0),u(R,null,F(y.value,t=>(c(),u("option",{key:t.id,value:t.id},o(t.name),9,Jl))),128))],544),[[$,L.value]])]),l("div",Ol,[i(l("select",{class:"form-select","onUpdate:modelValue":s[2]||(s[2]=t=>I.value=t),onChange:h},s[44]||(s[44]=[ll('<option value="">Все отделы</option><option value="bar">Бар</option><option value="cold">Холодный цех</option><option value="hot">Горячий цех</option><option value="dessert">Десерты</option><option value="grill">Гриль</option><option value="bakery">Выпечка</option>',7)]),544),[[$,I.value]])]),l("div",Ql,[i(l("select",{class:"form-select","onUpdate:modelValue":s[3]||(s[3]=t=>D.value=t),onChange:h},s[45]||(s[45]=[l("option",{value:""},"Все блюда",-1),l("option",{value:"available"},"Доступные",-1),l("option",{value:"unavailable"},"Недоступные",-1),l("option",{value:"popular"},"Популярные",-1)]),544),[[$,D.value]])]),l("div",Wl,[l("div",Xl,[l("button",{class:"btn btn-outline-primary",onClick:dl,disabled:k.value.length===0},s[46]||(s[46]=[l("i",{class:"bi bi-check-square"},null,-1),n(" Выбрать все ")]),8,Yl),l("div",Zl,[l("button",{class:"btn btn-outline-secondary dropdown-toggle","data-bs-toggle":"dropdown",disabled:b.value.length===0}," Действия ("+o(b.value.length)+") ",9,ls),l("ul",ss,[l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:s[4]||(s[4]=t=>W(!0))},s[47]||(s[47]=[l("i",{class:"bi bi-check-circle text-success"},null,-1),n(" Сделать доступными ")]))]),l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:s[5]||(s[5]=t=>W(!1))},s[48]||(s[48]=[l("i",{class:"bi bi-x-circle text-danger"},null,-1),n(" Сделать недоступными ")]))]),l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:s[6]||(s[6]=t=>X(!0))},s[49]||(s[49]=[l("i",{class:"bi bi-star text-warning"},null,-1),n(" Отметить популярными ")]))]),l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:s[7]||(s[7]=t=>X(!1))},s[50]||(s[50]=[l("i",{class:"bi bi-star text-muted"},null,-1),n(" Убрать из популярных ")]))]),s[52]||(s[52]=l("li",null,[l("hr",{class:"dropdown-divider"})],-1)),l("li",null,[l("a",{class:"dropdown-item text-danger",href:"#",onClick:rl},s[51]||(s[51]=[l("i",{class:"bi bi-trash"},null,-1),n(" Удалить выбранные ")]))])])])])])])])]),l("div",ts,[l("div",es,[l("div",os,[l("div",as,[s[53]||(s[53]=l("i",{class:"bi bi-egg-fried display-6 text-primary mb-2"},null,-1)),l("h5",is,o(Array.isArray(p.value)?p.value.length:0),1),s[54]||(s[54]=l("p",{class:"card-text text-muted"},"Всего блюд",-1))])])]),l("div",ns,[l("div",ds,[l("div",rs,[s[55]||(s[55]=l("i",{class:"bi bi-check-circle display-6 text-success mb-2"},null,-1)),l("h5",us,o(K.value),1),s[56]||(s[56]=l("p",{class:"card-text text-muted"},"Доступных",-1))])])]),l("div",cs,[l("div",ms,[l("div",vs,[s[57]||(s[57]=l("i",{class:"bi bi-star-fill display-6 text-warning mb-2"},null,-1)),l("h5",bs,o(G.value),1),s[58]||(s[58]=l("p",{class:"card-text text-muted"},"Популярных",-1))])])]),l("div",ps,[l("div",gs,[l("div",_s,[s[59]||(s[59]=l("i",{class:"bi bi-collection display-6 text-info mb-2"},null,-1)),l("h5",fs,o(Array.isArray(y.value)?y.value.length:0),1),s[60]||(s[60]=l("p",{class:"card-text text-muted"},"Категорий",-1))])])])]),N.value?(c(),u("div",ys,s[61]||(s[61]=[l("div",{class:"spinner-border text-primary",role:"status"},[l("span",{class:"visually-hidden"},"Загрузка...")],-1),l("p",{class:"mt-3 text-muted"},"Загрузка блюд...",-1)]))):k.value.length>0?(c(),u("div",ws,[(c(!0),u(R,null,F(k.value,t=>(c(),u("div",{key:t.id,class:f([U.value==="grid"?"col-md-6 col-lg-4":"col-12","mb-4"])},[l("div",{class:f(["card dish-card",{"dish-available":t.is_available,"dish-unavailable":!t.is_available}])},[l("div",ks,[l("div",xs,[i(l("input",{class:"form-check-input",type:"checkbox",id:`dish-${t.id}`,value:t.id,"onUpdate:modelValue":s[8]||(s[8]=_=>b.value=_)},null,8,hs),[[S,b.value]])]),t.main_image_url?(c(),u("div",Cs,[l("img",{src:t.main_image_url,alt:t.name,class:"dish-image"},null,8,Vs)])):(c(),u("div",Ds,s[62]||(s[62]=[l("i",{class:"bi bi-image"},null,-1)]))),l("div",Us,[l("h6",As,o(t.name),1),l("div",Ms,[l("span",{class:f(["badge",bl(t.category_id)])},o(vl(t.category_id)),3),l("span",{class:f(["badge",gl(t.department)])},o(pl(t.department)),3),t.is_popular?(c(),u("span",$s,s[63]||(s[63]=[l("i",{class:"bi bi-star-fill"},null,-1),n(" Популярное ")]))):B("",!0)])])]),l("div",Ss,[l("div",Bs,[l("div",qs,[l("p",Ls,o(t.description),1)]),l("div",Is,[l("div",Ns,[s[64]||(s[64]=l("i",{class:"bi bi-clock text-muted me-2"},null,-1)),l("span",null,o(t.cooking_time||"Не указано")+" мин",1)]),l("div",js,[s[65]||(s[65]=l("i",{class:"bi bi-speedometer2 text-muted me-2"},null,-1)),l("span",null,o(t.weight||"Не указано")+" г",1)])]),l("div",Es,[l("div",Ts,[s[66]||(s[66]=l("i",{class:"bi bi-fire text-muted me-2"},null,-1)),l("span",null,o(t.calories||"Не указано")+" ккал",1)]),l("div",Ps,[s[67]||(s[67]=l("i",{class:"bi bi-hash text-muted me-2"},null,-1)),l("span",null,o(t.code||"Нет кода"),1)])])]),t.ingredients?(c(),u("div",Rs,[l("small",Fs,[s[68]||(s[68]=l("i",{class:"bi bi-list-ul me-1"},null,-1)),n(" "+o(t.ingredients),1)])])):B("",!0)]),l("div",zs,[l("div",Hs,[l("div",Ks,[l("button",{class:f(["btn btn-success btn-sm text-light",{"btn-success":t.is_available}]),onClick:_=>il(t)},[l("i",{class:f(["bi",t.is_available?"bi-check-circle":"bi-x-circle"])},null,2),n(" "+o(t.is_available?"Доступно":"Недоступно"),1)],10,Gs),l("button",{class:"btn btn-outline-info btn-sm",onClick:_=>z(t)},s[69]||(s[69]=[l("i",{class:"bi bi-collection"},null,-1),n(" Вариации ")]),8,Js)]),l("div",Os,[s[75]||(s[75]=l("button",{class:"btn btn-outline-secondary btn-sm dropdown-toggle","data-bs-toggle":"dropdown"},[l("i",{class:"bi bi-three-dots"})],-1)),l("ul",Qs,[l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:_=>el(t)},s[70]||(s[70]=[l("i",{class:"bi bi-pencil"},null,-1),n(" Редактировать ")]),8,Ws)]),l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:_=>al(t)},s[71]||(s[71]=[l("i",{class:"bi bi-copy"},null,-1),n(" Дублировать ")]),8,Xs)]),l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:_=>nl(t)},[s[72]||(s[72]=l("i",{class:"bi bi-star"},null,-1)),n(" "+o(t.is_popular?"Убрать из популярных":"Отметить популярным"),1)],8,Ys)]),s[74]||(s[74]=l("li",null,[l("hr",{class:"dropdown-divider"})],-1)),l("li",null,[l("a",{class:"dropdown-item text-danger",href:"#",onClick:_=>ol(t)},s[73]||(s[73]=[l("i",{class:"bi bi-trash"},null,-1),n(" Удалить ")]),8,Zs)])])])])])],2)],2))),128))])):(c(),u("div",lt,[s[77]||(s[77]=l("i",{class:"bi bi-egg-fried display-1 text-muted mb-3"},null,-1)),s[78]||(s[78]=l("h4",{class:"text-muted"},"Блюда не найдены",-1)),s[79]||(s[79]=l("p",{class:"text-muted"},"Измените параметры поиска или добавьте новое блюдо",-1)),l("button",{class:"btn btn-primary",onClick:O},s[76]||(s[76]=[l("i",{class:"bi bi-plus-circle"},null,-1),n(" Добавить блюдо ")]))]))]),l("div",{class:"modal fade",id:"dishModal",tabindex:"-1",ref_key:"dishModal",ref:T},[l("div",st,[l("div",tt,[l("div",et,[l("h5",ot,o(A.value?"Редактирование блюда":"Создание нового блюда"),1),s[80]||(s[80]=l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),l("div",at,[l("form",{onSubmit:sl(Q,["prevent"])},[l("div",it,[l("div",nt,[l("div",dt,[s[81]||(s[81]=l("label",{class:"form-label"},"Название *",-1)),i(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=t=>a.value.name=t),required:"",maxlength:"255"},null,512),[[m,a.value.name]])])]),l("div",rt,[l("div",ut,[s[82]||(s[82]=l("label",{class:"form-label"},"Код блюда",-1)),i(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=t=>a.value.code=t),placeholder:"Например: DISH001"},null,512),[[m,a.value.code]])])])]),l("div",ct,[l("div",mt,[l("div",vt,[s[84]||(s[84]=l("label",{class:"form-label"},"Категория *",-1)),i(l("select",{class:"form-select","onUpdate:modelValue":s[11]||(s[11]=t=>a.value.category_id=t),required:""},[s[83]||(s[83]=l("option",{value:""},"Выберите категорию",-1)),(c(!0),u(R,null,F(y.value,t=>(c(),u("option",{key:t.id,value:t.id},o(t.name),9,bt))),128))],512),[[$,a.value.category_id]])])]),l("div",pt,[l("div",gt,[s[86]||(s[86]=l("label",{class:"form-label"},"Отдел *",-1)),i(l("select",{class:"form-select","onUpdate:modelValue":s[12]||(s[12]=t=>a.value.department=t),required:""},s[85]||(s[85]=[ll('<option value="">Выберите отдел</option><option value="bar">Бар</option><option value="cold">Холодный цех</option><option value="hot">Горячий цех</option><option value="dessert">Десерты</option><option value="grill">Гриль</option><option value="bakery">Выпечка</option>',7)]),512),[[$,a.value.department]])])])]),l("div",_t,[s[87]||(s[87]=l("label",{class:"form-label"},"Описание *",-1)),i(l("textarea",{class:"form-control","onUpdate:modelValue":s[13]||(s[13]=t=>a.value.description=t),rows:"3",required:"",maxlength:"500"},null,512),[[m,a.value.description]])]),l("div",ft,[s[88]||(s[88]=l("label",{class:"form-label"},"URL изображения",-1)),i(l("input",{type:"url",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=t=>a.value.main_image_url=t),placeholder:"https://example.com/image.jpg"},null,512),[[m,a.value.main_image_url]])]),l("div",yt,[l("div",wt,[l("div",kt,[s[89]||(s[89]=l("label",{class:"form-label"},"Время приготовления (мин)",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=t=>a.value.cooking_time=t),min:"0",max:"300"},null,512),[[m,a.value.cooking_time]])])]),l("div",xt,[l("div",ht,[s[90]||(s[90]=l("label",{class:"form-label"},"Вес (г)",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=t=>a.value.weight=t),min:"0",step:"0.1"},null,512),[[m,a.value.weight]])])]),l("div",Ct,[l("div",Vt,[s[91]||(s[91]=l("label",{class:"form-label"},"Калории (ккал)",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[17]||(s[17]=t=>a.value.calories=t),min:"0"},null,512),[[m,a.value.calories]])])])]),l("div",Dt,[s[92]||(s[92]=l("label",{class:"form-label"},"Ингредиенты",-1)),i(l("textarea",{class:"form-control","onUpdate:modelValue":s[18]||(s[18]=t=>a.value.ingredients=t),rows:"2",placeholder:"Список ингредиентов через запятую"},null,512),[[m,a.value.ingredients]])]),l("div",Ut,[s[93]||(s[93]=l("label",{class:"form-label"},"Порядок сортировки",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[19]||(s[19]=t=>a.value.sort_order=t),min:"0"},null,512),[[m,a.value.sort_order]])]),l("div",At,[l("div",Mt,[l("div",$t,[i(l("input",{class:"form-check-input",type:"checkbox",id:"is_available","onUpdate:modelValue":s[20]||(s[20]=t=>a.value.is_available=t)},null,512),[[S,a.value.is_available]]),s[94]||(s[94]=l("label",{class:"form-check-label",for:"is_available"}," Доступно для заказа ",-1))])]),l("div",St,[l("div",Bt,[i(l("input",{class:"form-check-input",type:"checkbox",id:"is_popular","onUpdate:modelValue":s[21]||(s[21]=t=>a.value.is_popular=t)},null,512),[[S,a.value.is_popular]]),s[95]||(s[95]=l("label",{class:"form-check-label",for:"is_popular"}," Популярное блюдо ",-1))])])])],32)]),l("div",qt,[s[96]||(s[96]=l("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Отмена ",-1)),l("button",{type:"button",class:"btn btn-primary",onClick:Q,disabled:j.value},[j.value?(c(),u("span",It)):B("",!0),n(" "+o(A.value?"Сохранить изменения":"Создать блюдо"),1)],8,Lt)])])])],512),l("div",{class:"modal fade",id:"variationsModal",tabindex:"-1",ref_key:"variationsModal",ref:H},[l("div",Nt,[l("div",jt,[l("div",Et,[l("h5",Tt," Вариации блюда: "+o(w.value?.name),1),s[97]||(s[97]=l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),l("div",Pt,[l("div",{class:"d-flex justify-content-between mb-3"},[s[99]||(s[99]=l("h6",null,"Список вариаций",-1)),l("button",{class:"btn btn-primary btn-sm",onClick:ul},s[98]||(s[98]=[l("i",{class:"bi bi-plus-circle"},null,-1),n(" Добавить вариацию ")]))]),l("div",Rt,[l("table",Ft,[s[103]||(s[103]=l("thead",null,[l("tr",null,[l("th",null,"Название"),l("th",null,"Цена"),l("th",null,"Вес"),l("th",null,"Калории"),l("th",null,"По умолчанию"),l("th",null,"Доступно"),l("th",null,"Действия")])],-1)),l("tbody",null,[q.value.length===0?(c(),u("tr",zt,s[100]||(s[100]=[l("td",{colspan:"7",class:"text-center text-muted py-4"},[l("i",{class:"bi bi-info-circle me-2"}),n(" У этого блюда нет вариаций ")],-1)]))):B("",!0),(c(!0),u(R,null,F(q.value,t=>(c(),u("tr",{key:t.id},[l("td",null,o(t.name||"Без названия"),1),l("td",null,o(t.price||0)+" ₽",1),l("td",null,o(t.weight||"Не указано")+" г",1),l("td",null,o(t.calories||"Не указано")+" ккал",1),l("td",null,[l("span",{class:f(["badge",t.is_default?"bg-primary":"bg-secondary"])},o(t.is_default?"Да":"Нет"),3)]),l("td",null,[l("span",{class:f(["badge",t.is_available?"bg-success":"bg-danger"])},o(t.is_available?"Да":"Нет"),3)]),l("td",null,[l("div",Ht,[l("button",{class:"btn btn-outline-primary btn-sm",onClick:_=>cl(t)},s[101]||(s[101]=[l("i",{class:"bi bi-pencil"},null,-1)]),8,Kt),l("button",{class:"btn btn-outline-danger btn-sm",onClick:_=>ml(t)},s[102]||(s[102]=[l("i",{class:"bi bi-trash"},null,-1)]),8,Gt)])])]))),128))])])])])])])],512),l("div",{class:"modal fade",id:"variationModal",tabindex:"-1",ref_key:"variationModal",ref:P},[l("div",Jt,[l("div",Ot,[l("div",Qt,[l("h5",Wt,o(M.value?"Редактирование вариации":"Создание новой вариации"),1),s[104]||(s[104]=l("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),l("div",Xt,[l("form",{onSubmit:sl(Y,["prevent"])},[l("div",Yt,[l("div",Zt,[l("div",le,[s[105]||(s[105]=l("label",{class:"form-label"},"Название *",-1)),i(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[22]||(s[22]=t=>d.value.name=t),required:"",maxlength:"255"},null,512),[[m,d.value.name]])])]),l("div",se,[l("div",te,[s[106]||(s[106]=l("label",{class:"form-label"},"Цена *",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[23]||(s[23]=t=>d.value.price=t),required:"",min:"0",step:"0.01"},null,512),[[m,d.value.price]])])])]),l("div",ee,[s[107]||(s[107]=l("label",{class:"form-label"},"Описание",-1)),i(l("textarea",{class:"form-control","onUpdate:modelValue":s[24]||(s[24]=t=>d.value.description=t),rows:"3",maxlength:"500"},null,512),[[m,d.value.description]])]),l("div",oe,[s[108]||(s[108]=l("label",{class:"form-label"},"URL изображения",-1)),i(l("input",{type:"url",class:"form-control","onUpdate:modelValue":s[25]||(s[25]=t=>d.value.image_url=t),placeholder:"https://example.com/image.jpg"},null,512),[[m,d.value.image_url]])]),l("div",ae,[l("div",ie,[l("div",ne,[s[109]||(s[109]=l("label",{class:"form-label"},"Вес (г)",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[26]||(s[26]=t=>d.value.weight=t),min:"0",step:"0.1"},null,512),[[m,d.value.weight]])])]),l("div",de,[l("div",re,[s[110]||(s[110]=l("label",{class:"form-label"},"Калории (ккал)",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[27]||(s[27]=t=>d.value.calories=t),min:"0"},null,512),[[m,d.value.calories]])])]),l("div",ue,[l("div",ce,[s[111]||(s[111]=l("label",{class:"form-label"},"Порядок сортировки",-1)),i(l("input",{type:"number",class:"form-control","onUpdate:modelValue":s[28]||(s[28]=t=>d.value.sort_order=t),min:"0"},null,512),[[m,d.value.sort_order]])])])]),l("div",me,[s[112]||(s[112]=l("label",{class:"form-label"},"SKU",-1)),i(l("input",{type:"text",class:"form-control","onUpdate:modelValue":s[29]||(s[29]=t=>d.value.sku=t),placeholder:"Артикул товара"},null,512),[[m,d.value.sku]])]),l("div",ve,[l("div",be,[l("div",pe,[i(l("input",{class:"form-check-input",type:"checkbox",id:"variation_is_available","onUpdate:modelValue":s[30]||(s[30]=t=>d.value.is_available=t)},null,512),[[S,d.value.is_available]]),s[113]||(s[113]=l("label",{class:"form-check-label",for:"variation_is_available"}," Доступно для заказа ",-1))])]),l("div",ge,[l("div",_e,[i(l("input",{class:"form-check-input",type:"checkbox",id:"variation_is_default","onUpdate:modelValue":s[31]||(s[31]=t=>d.value.is_default=t)},null,512),[[S,d.value.is_default]]),s[114]||(s[114]=l("label",{class:"form-check-label",for:"variation_is_default"}," Вариация по умолчанию ",-1))])])])],32)]),l("div",fe,[s[115]||(s[115]=l("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Отмена ",-1)),l("button",{type:"button",class:"btn btn-primary",onClick:Y,disabled:E.value},[E.value?(c(),u("span",we)):B("",!0),n(" "+o(M.value?"Сохранить изменения":"Создать вариацию"),1)],8,ye)])])])],512)])}}});export{he as default};
