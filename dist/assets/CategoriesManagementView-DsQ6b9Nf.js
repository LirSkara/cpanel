import{d as pe,u as fe,r as u,c as N,o as ge,a as _e,b as r,e,f as g,g as ye,w as ke,h as Ce,i as n,t as a,j as b,k as T,F as G,l as H,m as U,v as _,n as $,p as f,s as h,x as he,q as d,_ as xe}from"./index-BRWVB6f9.js";const we={class:"categories-page"},Ae={class:"container-fluid py-4"},Ve={class:"card shadow-sm border-0 mb-4 p-3"},Fe={class:"card-body"},Ue={"aria-label":"breadcrumb",class:"mb-3"},$e={class:"breadcrumb mb-0"},Se={class:"breadcrumb-item"},De={class:"row align-items-center"},Me={class:"col-md-8"},Ie={class:"text-muted mb-0"},Ee={class:"badge bg-primary"},je={class:"badge bg-success"},Ne={class:"badge bg-warning"},Oe={class:"badge bg-info"},ze={class:"col-md-4 text-end"},Be={class:"btn-group"},Le=["disabled"],Re=["disabled"],qe={class:"container-fluid"},Pe={class:"row"},Te={class:"col-12"},Ge={class:"card shadow-sm border-0"},He={class:"card-header bg-white"},Je={class:"row align-items-center"},Ke={class:"col-md-8"},Qe={class:"d-flex gap-2 align-items-center"},We={key:0,class:"btn-group btn-group-sm"},Xe=["title"],Ye=["title"],Ze=["title"],et={class:"d-flex gap-2 ms-auto"},tt={class:"card-body"},st={key:0,class:"text-center py-5"},lt={key:1,class:"text-center py-5"},ot={key:2,class:"row"},at={class:"card-header d-flex justify-content-between align-items-center py-2"},it={class:"d-flex align-items-center"},rt={class:"form-check me-2"},nt=["id","value"],dt={class:"fs-6"},ut={class:"d-flex gap-1"},ct={key:0,class:"badge bg-warning text-dark badge-sm"},vt={class:"card-body py-2"},mt={key:0,class:"row g-2 mb-2"},bt={class:"col-12"},pt={class:"text-muted text-truncate d-block"},ft={class:"row g-2 mb-2"},gt={class:"col-6"},_t={class:"info-item-compact"},yt={class:"fw-bold"},kt={class:"col-6"},Ct={class:"info-item-compact"},ht={class:"text-muted"},xt={class:"row g-2 mb-2"},wt={class:"col-12"},At={class:"info-item-compact"},Vt={class:"text-truncate"},Ft={class:"card-footer bg-transparent border-top-0 py-2"},Ut={class:"d-flex gap-1 flex-wrap"},$t=["onClick","title"],St=["onClick","title"],Dt=["onClick","title"],Mt=["onClick","title"],It={class:"dropdown"},Et={class:"dropdown-menu dropdown-menu-end"},jt=["onClick"],Nt=["onClick"],Ot=["onClick"],zt={class:"modal-content"},Bt={class:"modal-body"},Lt={key:0,class:"alert alert-danger",role:"alert"},Rt={class:"mb-0"},qt={class:"row g-3"},Pt={class:"col-md-8"},Tt={class:"col-md-4"},Gt={class:"col-12"},Ht={class:"col-md-6"},Jt={class:"col-md-6"},Kt=["placeholder"],Qt={class:"col-12"},Wt={class:"row g-2"},Xt={class:"col-md-6"},Yt={class:"form-check"},Zt={class:"col-md-6"},es={class:"form-check"},ts={class:"d-flex justify-content-end gap-2 mt-4"},ss=["disabled"],ls={class:"modal-content"},os={class:"modal-body"},as={key:0,class:"alert alert-danger",role:"alert"},is={class:"mb-0"},rs={class:"row g-3"},ns={class:"col-md-8"},ds={class:"col-md-4"},us={class:"col-12"},cs={class:"col-md-6"},vs={class:"col-md-6"},ms={class:"col-12"},bs={class:"row g-2"},ps={class:"col-md-6"},fs={class:"form-check"},gs={class:"col-md-6"},_s={class:"form-check"},ys={class:"d-flex justify-content-end gap-2 mt-4"},ks=["disabled"],Cs={class:"modal-content"},hs={class:"modal-header"},xs={class:"modal-title"},ws={class:"modal-body"},As={key:0,class:"text-center py-4"},Vs={key:1,class:"text-center py-4"},Fs={key:2,class:"row"},Us={class:"card border-0 shadow-sm"},$s={key:0,class:"card-img-top-container"},Ss=["src","alt"],Ds={class:"card-body py-2"},Ms={class:"d-flex justify-content-between align-items-start"},Is={class:"fs-6"},Es={key:0,class:"text-muted small text-truncate"},js=pe({__name:"CategoriesManagementView",setup(Ns){const J=_e(),K=fe(),o=u([]),x=u([]),w=u(!1),O=u(!1),S=u(!1),A=u(""),V=u(""),D=u(!1),z=u(!1),B=u(!1),c=u({name:"",description:"",image_url:"",sort_order:0,is_active:!0,color:"#007bff",featured:!1}),M=u(!1),y=u(""),m=u({}),F=u(null),I=u(!1),k=u(""),L=u(null),i=u([]),Q=N(()=>Array.isArray(o.value)?o.value.filter(s=>s.is_active).length:0),W=N(()=>Array.isArray(o.value)?o.value.filter(s=>!s.is_active).length:0),X=N(()=>Array.isArray(o.value)?o.value.filter(s=>s.featured).length:0),Y=N(()=>Array.isArray(o.value)?o.value.filter(s=>{const t=!A.value||A.value==="active"&&s.is_active||A.value==="inactive"&&!s.is_active,v=!V.value||V.value==="featured"&&s.featured||V.value==="not-featured"&&!s.featured;return t&&v}).sort((s,t)=>s.sort_order-t.sort_order):[]),Z=s=>new Date(s).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),ee=s=>s?"bg-success":"bg-secondary",te=s=>s.is_active?"category-active":"category-inactive",se=s=>0,R=()=>!Array.isArray(o.value)||o.value.length===0?"1":(Math.max(...o.value.map(t=>t.sort_order))+1).toString(),C=async()=>{try{w.value=!0;const s=await f.getCategories();o.value=s.categories||s}catch(s){console.error("Failed to load categories:",s),o.value=[]}finally{w.value=!1}},E=()=>{D.value=!1,y.value="",c.value={name:"",description:"",image_url:"",sort_order:0,is_active:!0,color:"#007bff",featured:!1}},le=async()=>{try{M.value=!0,y.value="",c.value.sort_order||(c.value.sort_order=parseInt(R()));const s=await f.createCategory(c.value);Array.isArray(o.value)?o.value.push(s):o.value=[s],E()}catch(s){console.error("Failed to create category:",s),s instanceof Error?y.value=s.message:y.value="Произошла неизвестная ошибка"}finally{M.value=!1}},oe=s=>{F.value=s.id,m.value={name:s.name,description:s.description||"",image_url:s.image_url||"",sort_order:s.sort_order,is_active:s.is_active,color:s.color||"#007bff",featured:s.featured},z.value=!0},j=()=>{z.value=!1,k.value="",m.value={},F.value=null},ae=async()=>{if(!(!F.value||!Array.isArray(o.value)))try{I.value=!0,k.value="";const s=await f.updateCategory(F.value,m.value),t=o.value.findIndex(v=>v.id===F.value);t!==-1&&(o.value[t]=s),j()}catch(s){console.error("Failed to update category:",s),s instanceof Error?k.value=s.message:k.value="Произошла неизвестная ошибка"}finally{I.value=!1}},ie=async s=>{L.value=s,B.value=!0;try{O.value=!0;const t=await f.getCategoryDishes(s.id);x.value=t.dishes||t}catch(t){console.error("Failed to load category dishes:",t),x.value=[]}finally{O.value=!1}},q=()=>{B.value=!1,L.value=null,x.value=[]},re=async s=>{if(Array.isArray(o.value))try{const t=!s.is_active,v=await f.updateCategory(s.id,{is_active:t}),l=o.value.findIndex(p=>p.id===s.id);l!==-1&&(o.value[l]=v)}catch(t){console.error("Failed to toggle category status:",t)}},ne=async s=>{if(Array.isArray(o.value))try{const t=!s.featured,v=await f.updateCategory(s.id,{featured:t}),l=o.value.findIndex(p=>p.id===s.id);l!==-1&&(o.value[l]=v)}catch(t){console.error("Failed to toggle category featured:",t)}},P=async(s,t)=>{if(Array.isArray(o.value))try{const v=t==="up"?s.sort_order-1:s.sort_order+1,l=await f.updateCategory(s.id,{sort_order:v}),p=o.value.findIndex(be=>be.id===s.id);p!==-1&&(o.value[p]=l),await C()}catch(v){console.error("Failed to change category order:",v)}},de=async s=>{if(Array.isArray(o.value)&&confirm(`Вы уверены, что хотите удалить категорию "${s.name}"?`))try{await f.deleteCategory(s.id),o.value=o.value.filter(t=>t.id!==s.id)}catch(t){console.error("Failed to delete category:",t)}},ue=async()=>{if(Array.isArray(o.value))try{S.value=!0;const s=[...o.value].sort((t,v)=>t.sort_order-v.sort_order);for(let t=0;t<s.length;t++){const v=s[t];v.sort_order!==t+1&&await f.updateCategory(v.id,{sort_order:t+1})}await C(),alert("Сортировка категорий выполнена")}catch(s){console.error("Failed to sort categories:",s),alert("Ошибка при сортировке категорий")}finally{S.value=!1}},ce=async()=>{if(i.value.length&&confirm(`Вы уверены, что хотите активировать ${i.value.length} категорий?`))try{const s=i.value.map(t=>f.updateCategory(t,{is_active:!0}));await Promise.all(s),await C(),i.value=[]}catch(s){console.error("Failed to bulk activate categories:",s),alert("Ошибка при активации категорий")}},ve=async()=>{if(i.value.length&&confirm(`Вы уверены, что хотите деактивировать ${i.value.length} категорий?`))try{const s=i.value.map(t=>f.updateCategory(t,{is_active:!1}));await Promise.all(s),await C(),i.value=[]}catch(s){console.error("Failed to bulk deactivate categories:",s),alert("Ошибка при деактивации категорий")}},me=async()=>{if(i.value.length&&confirm(`Вы уверены, что хотите удалить ${i.value.length} категорий? Это действие нельзя отменить.`))try{const s=i.value.map(t=>f.deleteCategory(t));await Promise.all(s),await C(),i.value=[]}catch(s){console.error("Failed to bulk delete categories:",s),alert("Ошибка при удалении категорий")}};return ge(async()=>{if(!K.isAuthenticated){J.push("/login");return}await C()}),(s,t)=>{const v=Ce("router-link");return d(),r("div",we,[e("div",Ae,[e("div",Ve,[e("div",Fe,[e("nav",Ue,[e("ol",$e,[e("li",Se,[ye(v,{to:"/dashboard",class:"text-decoration-none text-dark"},{default:ke(()=>t[22]||(t[22]=[e("i",{class:"bi bi-house me-1"},null,-1),n(" Главная ")])),_:1,__:[22]})]),t[23]||(t[23]=e("li",{class:"breadcrumb-item active text-muted","aria-current":"page"},"Управление категориями",-1))])]),e("div",De,[e("div",Me,[t[28]||(t[28]=e("h1",{class:"h2 mb-2 d-flex align-items-center"},[e("i",{class:"bi bi-grid-3x3-gap me-2 text-primary"}),n(" Управление категориями ")],-1)),e("p",Ie,[t[24]||(t[24]=n(" Всего категорий: ")),e("span",Ee,a(Array.isArray(o.value)?o.value.length:0),1),t[25]||(t[25]=n(" • Активных: ")),e("span",je,a(Q.value),1),t[26]||(t[26]=n(" • Неактивных: ")),e("span",Ne,a(W.value),1),t[27]||(t[27]=n(" • Рекомендуемых: ")),e("span",Oe,a(X.value),1)])]),e("div",ze,[e("div",Be,[e("button",{onClick:t[0]||(t[0]=l=>D.value=!0),class:"btn btn-primary",disabled:w.value},t[29]||(t[29]=[e("i",{class:"bi bi-plus-circle me-1"},null,-1),n(" Добавить категорию ")]),8,Le),e("button",{onClick:ue,class:"btn btn-outline-secondary",disabled:w.value||S.value,title:"Пересортировать категории"},[t[30]||(t[30]=e("i",{class:"bi bi-arrow-up-down me-1"},null,-1)),n(" "+a(S.value?"Сортировка...":"Сортировать"),1)],8,Re)])])])])])]),e("div",qe,[e("div",Pe,[e("div",Te,[e("div",Ge,[e("div",He,[e("div",Je,[t[36]||(t[36]=e("div",{class:"col-md-4"},[e("h5",{class:"mb-0"},[e("i",{class:"bi bi-grid-3x3-gap me-2"}),n(" Список категорий ")])],-1)),e("div",Ke,[e("div",Qe,[i.value.length>0?(d(),r("div",We,[e("button",{class:"btn btn-outline-primary",onClick:ce,title:`Активировать ${i.value.length} категорий`},[t[31]||(t[31]=e("i",{class:"bi bi-check-circle me-1"},null,-1)),n(" Активировать ("+a(i.value.length)+") ",1)],8,Xe),e("button",{class:"btn btn-outline-secondary",onClick:ve,title:`Деактивировать ${i.value.length} категорий`},[t[32]||(t[32]=e("i",{class:"bi bi-x-circle me-1"},null,-1)),n(" Деактивировать ("+a(i.value.length)+") ",1)],8,Ye),e("button",{class:"btn btn-outline-danger",onClick:me,title:`Удалить ${i.value.length} категорий`},[t[33]||(t[33]=e("i",{class:"bi bi-trash me-1"},null,-1)),n(" Удалить ("+a(i.value.length)+") ",1)],8,Ze)])):g("",!0),e("div",et,[b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>A.value=l),class:"form-select form-select-sm"},t[34]||(t[34]=[e("option",{value:""},"Все статусы",-1),e("option",{value:"active"},"Активные",-1),e("option",{value:"inactive"},"Неактивные",-1)]),512),[[T,A.value]]),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>V.value=l),class:"form-select form-select-sm"},t[35]||(t[35]=[e("option",{value:""},"Все",-1),e("option",{value:"featured"},"Рекомендуемые",-1),e("option",{value:"not-featured"},"Обычные",-1)]),512),[[T,V.value]])])])])])]),e("div",tt,[w.value?(d(),r("div",st,t[37]||(t[37]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Загрузка...")],-1),e("p",{class:"text-muted mt-2"},"Загрузка категорий...",-1)]))):!Array.isArray(o.value)||o.value.length===0?(d(),r("div",lt,[t[39]||(t[39]=e("i",{class:"bi bi-grid-3x3-gap text-muted",style:{"font-size":"3rem"}},null,-1)),t[40]||(t[40]=e("p",{class:"text-muted mt-3"},"Категории не найдены",-1)),e("button",{onClick:t[3]||(t[3]=l=>D.value=!0),class:"btn btn-primary"},t[38]||(t[38]=[e("i",{class:"bi bi-plus-circle me-1"},null,-1),n(" Добавить первую категорию ")]))])):(d(),r("div",ot,[(d(!0),r(G,null,H(Y.value,l=>(d(),r("div",{key:l.id,class:"col-lg-4 col-md-6 mb-3"},[e("div",{class:h(["card border-0 shadow-sm category-card",te(l)])},[e("div",at,[e("div",it,[e("div",rt,[b(e("input",{class:"form-check-input",type:"checkbox",id:`category-${l.id}`,"onUpdate:modelValue":t[4]||(t[4]=p=>i.value=p),value:l.id},null,8,nt),[[$,i.value]])]),e("div",{class:"category-color-indicator me-2",style:he({backgroundColor:l.color||"#6c757d"})},null,4),e("strong",dt,a(l.name),1)]),e("div",ut,[l.featured?(d(),r("span",ct,t[41]||(t[41]=[e("i",{class:"bi bi-star-fill"},null,-1)]))):g("",!0),e("span",{class:h(["badge badge-sm",ee(l.is_active)])},a(l.is_active?"Активна":"Неактивна"),3)])]),e("div",vt,[l.description?(d(),r("div",mt,[e("div",bt,[e("small",pt,a(l.description),1)])])):g("",!0),e("div",ft,[e("div",gt,[e("div",_t,[t[42]||(t[42]=e("i",{class:"bi bi-cup-hot text-primary me-1"},null,-1)),e("span",yt,a(se(l.id)),1),t[43]||(t[43]=e("small",{class:"text-muted ms-1"},"блюд",-1))])]),e("div",kt,[e("div",Ct,[t[44]||(t[44]=e("i",{class:"bi bi-sort-numeric-down text-info me-1"},null,-1)),e("small",ht,"Порядок: "+a(l.sort_order),1)])])]),e("div",xt,[e("div",wt,[e("div",At,[t[45]||(t[45]=e("i",{class:"bi bi-clock text-info me-1"},null,-1)),e("small",Vt,a(Z(l.updated_at)),1)])])])]),e("div",Ft,[e("div",Ut,[e("button",{class:"btn btn-sm btn-outline-primary flex-fill",onClick:p=>ie(l),title:"Просмотреть блюда категории "+l.name},t[46]||(t[46]=[e("i",{class:"bi bi-cup-hot"},null,-1)]),8,$t),e("button",{class:"btn btn-sm btn-outline-secondary flex-fill",onClick:p=>oe(l),title:"Редактировать категорию "+l.name},t[47]||(t[47]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,St),e("button",{class:h(["btn btn-sm flex-fill",l.is_active?"btn-outline-warning":"btn-outline-success"]),onClick:p=>re(l),title:l.is_active?"Деактивировать категорию":"Активировать категорию"},[e("i",{class:h(["bi",l.is_active?"bi-toggle-off":"bi-toggle-on"])},null,2)],10,Dt),e("button",{class:h(["btn btn-sm flex-fill",l.featured?"btn-warning":"btn-outline-warning"]),onClick:p=>ne(l),title:l.featured?"Убрать из рекомендуемых":"Добавить в рекомендуемые"},t[48]||(t[48]=[e("i",{class:"bi bi-star"},null,-1)]),10,Mt),e("div",It,[t[53]||(t[53]=e("button",{class:"btn btn-sm btn-outline-secondary dropdown-toggle-split",type:"button","data-bs-toggle":"dropdown",title:"Дополнительные действия"},[e("i",{class:"bi bi-three-dots"})],-1)),e("ul",Et,[e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:p=>P(l,"up")},t[49]||(t[49]=[e("i",{class:"bi bi-arrow-up me-2"},null,-1),n(" Переместить вверх ")]),8,jt)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:p=>P(l,"down")},t[50]||(t[50]=[e("i",{class:"bi bi-arrow-down me-2"},null,-1),n(" Переместить вниз ")]),8,Nt)]),t[52]||(t[52]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("a",{class:"dropdown-item text-danger",href:"#",onClick:p=>de(l)},t[51]||(t[51]=[e("i",{class:"bi bi-trash me-2"},null,-1),n(" Удалить ")]),8,Ot)])])])])])],2)]))),128))]))])])])])]),D.value?(d(),r("div",{key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"},onClick:E},[e("div",{class:"modal-dialog modal-dialog-centered modal-lg",onClick:t[12]||(t[12]=U(()=>{},["stop"]))},[e("div",zt,[e("div",{class:"modal-header"},[t[54]||(t[54]=e("h5",{class:"modal-title"},[e("i",{class:"bi bi-plus-circle me-2"}),n(" Добавить категорию ")],-1)),e("button",{type:"button",class:"btn-close",onClick:E})]),e("div",Bt,[y.value?(d(),r("div",Lt,[e("pre",Rt,a(y.value),1)])):g("",!0),e("form",{onSubmit:U(le,["prevent"])},[e("div",qt,[e("div",Pt,[t[55]||(t[55]=e("label",{class:"form-label"},"Название категории",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>c.value.name=l),type:"text",class:"form-control",required:"",placeholder:"Горячие блюда"},null,512),[[_,c.value.name]])]),e("div",Tt,[t[56]||(t[56]=e("label",{class:"form-label"},"Цвет",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>c.value.color=l),type:"color",class:"form-control form-control-color"},null,512),[[_,c.value.color]])]),e("div",Gt,[t[57]||(t[57]=e("label",{class:"form-label"},"Описание",-1)),b(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=l=>c.value.description=l),class:"form-control",rows:"3",placeholder:"Описание категории"},null,512),[[_,c.value.description]])]),e("div",Ht,[t[58]||(t[58]=e("label",{class:"form-label"},"Изображение (URL)",-1)),b(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>c.value.image_url=l),type:"url",class:"form-control",placeholder:"https://example.com/image.jpg"},null,512),[[_,c.value.image_url]])]),e("div",Jt,[t[59]||(t[59]=e("label",{class:"form-label"},"Порядок сортировки",-1)),b(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>c.value.sort_order=l),type:"number",class:"form-control",min:"0",placeholder:R()},null,8,Kt),[[_,c.value.sort_order,void 0,{number:!0}]])]),e("div",Qt,[e("div",Wt,[e("div",Xt,[e("div",Yt,[b(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>c.value.is_active=l),class:"form-check-input",type:"checkbox",id:"createActive"},null,512),[[$,c.value.is_active]]),t[60]||(t[60]=e("label",{class:"form-check-label",for:"createActive"}," Активна ",-1))])]),e("div",Zt,[e("div",es,[b(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>c.value.featured=l),class:"form-check-input",type:"checkbox",id:"createFeatured"},null,512),[[$,c.value.featured]]),t[61]||(t[61]=e("label",{class:"form-check-label",for:"createFeatured"}," Рекомендуемая ",-1))])])])])]),e("div",ts,[e("button",{type:"button",onClick:E,class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",class:"btn btn-primary",disabled:M.value},[t[62]||(t[62]=e("i",{class:"bi bi-plus-circle me-1"},null,-1)),n(" "+a(M.value?"Создание...":"Создать"),1)],8,ss)])],32)])])])])):g("",!0),z.value?(d(),r("div",{key:1,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"},onClick:j},[e("div",{class:"modal-dialog modal-dialog-centered modal-lg",onClick:t[20]||(t[20]=U(()=>{},["stop"]))},[e("div",ls,[e("div",{class:"modal-header"},[t[63]||(t[63]=e("h5",{class:"modal-title"},[e("i",{class:"bi bi-pencil me-2"}),n(" Редактировать категорию ")],-1)),e("button",{type:"button",class:"btn-close",onClick:j})]),e("div",os,[k.value?(d(),r("div",as,[e("pre",is,a(k.value),1)])):g("",!0),e("form",{onSubmit:U(ae,["prevent"])},[e("div",rs,[e("div",ns,[t[64]||(t[64]=e("label",{class:"form-label"},"Название категории",-1)),b(e("input",{"onUpdate:modelValue":t[13]||(t[13]=l=>m.value.name=l),type:"text",class:"form-control",required:""},null,512),[[_,m.value.name]])]),e("div",ds,[t[65]||(t[65]=e("label",{class:"form-label"},"Цвет",-1)),b(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>m.value.color=l),type:"color",class:"form-control form-control-color"},null,512),[[_,m.value.color]])]),e("div",us,[t[66]||(t[66]=e("label",{class:"form-label"},"Описание",-1)),b(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=l=>m.value.description=l),class:"form-control",rows:"3"},null,512),[[_,m.value.description]])]),e("div",cs,[t[67]||(t[67]=e("label",{class:"form-label"},"Изображение (URL)",-1)),b(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>m.value.image_url=l),type:"url",class:"form-control"},null,512),[[_,m.value.image_url]])]),e("div",vs,[t[68]||(t[68]=e("label",{class:"form-label"},"Порядок сортировки",-1)),b(e("input",{"onUpdate:modelValue":t[17]||(t[17]=l=>m.value.sort_order=l),type:"number",class:"form-control",min:"0"},null,512),[[_,m.value.sort_order,void 0,{number:!0}]])]),e("div",ms,[e("div",bs,[e("div",ps,[e("div",fs,[b(e("input",{"onUpdate:modelValue":t[18]||(t[18]=l=>m.value.is_active=l),class:"form-check-input",type:"checkbox",id:"editActive"},null,512),[[$,m.value.is_active]]),t[69]||(t[69]=e("label",{class:"form-check-label",for:"editActive"}," Активна ",-1))])]),e("div",gs,[e("div",_s,[b(e("input",{"onUpdate:modelValue":t[19]||(t[19]=l=>m.value.featured=l),class:"form-check-input",type:"checkbox",id:"editFeatured"},null,512),[[$,m.value.featured]]),t[70]||(t[70]=e("label",{class:"form-check-label",for:"editFeatured"}," Рекомендуемая ",-1))])])])])]),e("div",ys,[e("button",{type:"button",onClick:j,class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",class:"btn btn-primary",disabled:I.value},[t[71]||(t[71]=e("i",{class:"bi bi-check-circle me-1"},null,-1)),n(" "+a(I.value?"Сохранение...":"Сохранить"),1)],8,ks)])],32)])])])])):g("",!0),B.value?(d(),r("div",{key:2,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"},onClick:q},[e("div",{class:"modal-dialog modal-dialog-centered modal-xl",onClick:t[21]||(t[21]=U(()=>{},["stop"]))},[e("div",Cs,[e("div",hs,[e("h5",xs,[t[72]||(t[72]=e("i",{class:"bi bi-cup-hot me-2"},null,-1)),n(' Блюда категории "'+a(L.value?.name)+'" ',1)]),e("button",{type:"button",class:"btn-close",onClick:q})]),e("div",ws,[O.value?(d(),r("div",As,t[73]||(t[73]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Загрузка блюд...")],-1)]))):x.value.length===0?(d(),r("div",Vs,t[74]||(t[74]=[e("i",{class:"bi bi-cup-hot text-muted",style:{"font-size":"2rem"}},null,-1),e("p",{class:"text-muted mt-2"},"В данной категории нет блюд",-1)]))):(d(),r("div",Fs,[(d(!0),r(G,null,H(x.value,l=>(d(),r("div",{key:l.id,class:"col-md-4 mb-3"},[e("div",Us,[l.main_image_url?(d(),r("div",$s,[e("img",{src:l.main_image_url,class:"card-img-top dish-image",alt:l.name},null,8,Ss)])):g("",!0),e("div",Ds,[e("div",Ms,[e("div",null,[e("strong",Is,a(l.name),1),l.description?(d(),r("div",Es,a(l.description),1)):g("",!0)]),e("span",{class:h(["badge ms-2",l.is_available?"bg-success":"bg-secondary"])},a(l.is_available?"Доступно":"Недоступно"),3)])])])]))),128))]))])])])])):g("",!0)])}}}),zs=xe(js,[["__scopeId","data-v-1919fa36"]]);export{zs as default};
