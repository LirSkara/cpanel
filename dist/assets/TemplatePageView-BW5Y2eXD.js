import{d as j,u as B,r as i,c as V,o as F,a as O,b as m,e,f as _,g as P,w as R,h as $,i as r,t as c,m as k,j as d,v as x,k as h,n as T,q as b,_ as z}from"./index-BRWVB6f9.js";const G={class:"template-page"},H={class:"container-fluid py-4"},J={class:"card shadow-sm border-0 mb-4 p-3"},K={class:"card-body"},L={"aria-label":"breadcrumb",class:"mb-3"},Q={class:"breadcrumb mb-0"},W={class:"breadcrumb-item"},X={class:"row align-items-center"},Y={class:"col-md-8"},ee={class:"text-muted mb-0"},te={class:"badge bg-primary"},se={class:"badge bg-success"},ae={class:"badge bg-warning"},le={class:"col-md-4 text-end"},oe=["disabled"],ie={class:"modal-content"},ne={class:"modal-body"},re={key:0,class:"alert alert-danger",role:"alert"},de={class:"mb-0"},ce={class:"mb-3"},ue={class:"mb-3"},ve={class:"mb-3"},me={class:"mb-3"},be={class:"form-check"},pe={class:"d-flex justify-content-end gap-2"},ye=["disabled"],fe={class:"modal-content"},ge={class:"modal-body"},_e={key:0,class:"alert alert-danger",role:"alert"},ke={class:"mb-0"},xe={class:"mb-3"},we={class:"mb-3"},Ce={class:"mb-3"},Ae={class:"mb-3"},Ie={class:"form-check"},Ve={class:"d-flex justify-content-end gap-2"},he=["disabled"],Te=j({__name:"TemplatePageView",setup(Se){const S=O(),Z=B(),l=i([]),w=i(!1),C=i(!1),I=i(!1),o=i({name:"",description:"",category:"",is_active:!0}),p=i(!1),u=i(""),n=i({}),A=i(null),y=i(!1),v=i(""),M=V(()=>Array.isArray(l.value)?l.value.filter(s=>s.is_active).length:0),U=V(()=>Array.isArray(l.value)?l.value.filter(s=>!s.is_active).length:0),E=async()=>{try{w.value=!0,l.value=[{id:1,name:"Элемент 1",description:"Описание элемента 1",category:"category1",is_active:!0,created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z"},{id:2,name:"Элемент 2",description:"Описание элемента 2",category:"category2",is_active:!1,created_at:"2025-01-02T00:00:00Z",updated_at:"2025-01-02T00:00:00Z"},{id:3,name:"Элемент 3",description:"Описание элемента 3",category:"category3",is_active:!0,created_at:"2025-01-03T00:00:00Z",updated_at:"2025-01-03T00:00:00Z"},{id:4,name:"Элемент 4",description:"Описание элемента 4",category:"category1",is_active:!1,created_at:"2025-01-04T00:00:00Z",updated_at:"2025-01-04T00:00:00Z"},{id:5,name:"Элемент 5",description:"Описание элемента 5",category:"category2",is_active:!0,created_at:"2025-01-05T00:00:00Z",updated_at:"2025-01-05T00:00:00Z"}]}catch(s){console.error("Failed to load items:",s),l.value=[]}finally{w.value=!1}},f=()=>{C.value=!1,u.value="",o.value={name:"",description:"",category:"",is_active:!0}},D=async()=>{try{p.value=!0,u.value="";const s={id:Date.now(),name:o.value.name,description:o.value.description,category:o.value.category,is_active:o.value.is_active,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};Array.isArray(l.value)?l.value.push(s):l.value=[s],f()}catch(s){console.error("Failed to create item:",s),s instanceof Error?u.value=s.message:u.value="Произошла неизвестная ошибка"}finally{p.value=!1}},g=()=>{I.value=!1,v.value="",n.value={},A.value=null},q=async()=>{if(!(!A.value||!Array.isArray(l.value)))try{y.value=!0,v.value="";const s=l.value.findIndex(t=>t.id===A.value);s!==-1&&(l.value[s]={...l.value[s],...n.value,updated_at:new Date().toISOString()}),g()}catch(s){console.error("Failed to update item:",s),s instanceof Error?v.value=s.message:v.value="Произошла неизвестная ошибка"}finally{y.value=!1}};return F(async()=>{if(!Z.isAuthenticated){S.push("/login");return}await E()}),(s,t)=>{const N=$("router-link");return b(),m("div",G,[e("div",H,[e("div",J,[e("div",K,[e("nav",L,[e("ol",Q,[e("li",W,[P(N,{to:"/dashboard",class:"text-decoration-none text-dark"},{default:R(()=>t[11]||(t[11]=[e("i",{class:"bi bi-house me-1"},null,-1),r(" Главная ")])),_:1,__:[11]})]),t[12]||(t[12]=e("li",{class:"breadcrumb-item active text-muted","aria-current":"page"},"Шаблонная страница",-1))])]),e("div",X,[e("div",Y,[t[16]||(t[16]=e("h1",{class:"h2 mb-2 d-flex align-items-center"},[e("i",{class:"bi bi-layout-text-window-reverse me-2 text-primary"}),r(" Шаблонная страница ")],-1)),e("p",ee,[t[13]||(t[13]=r(" Всего элементов: ")),e("span",te,c(Array.isArray(l.value)?l.value.length:0),1),t[14]||(t[14]=r(" • Активных: ")),e("span",se,c(M.value),1),t[15]||(t[15]=r(" • Неактивных: ")),e("span",ae,c(U.value),1)])]),e("div",le,[e("button",{onClick:t[0]||(t[0]=a=>C.value=!0),class:"btn btn-primary fs-5",disabled:w.value},t[17]||(t[17]=[e("i",{class:"bi bi-plus-circle me-1"},null,-1),r(" Добавить элемент ")]),8,oe)])])])])]),C.value?(b(),m("div",{key:0,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"},onClick:f},[e("div",{class:"modal-dialog modal-dialog-centered",onClick:t[5]||(t[5]=k(()=>{},["stop"]))},[e("div",ie,[e("div",{class:"modal-header"},[t[18]||(t[18]=e("h5",{class:"modal-title"},[e("i",{class:"bi bi-plus-circle me-2"}),r(" Добавить элемент ")],-1)),e("button",{type:"button",class:"btn-close",onClick:f})]),e("div",ne,[u.value?(b(),m("div",re,[e("pre",de,c(u.value),1)])):_("",!0),e("form",{onSubmit:k(D,["prevent"])},[e("div",ce,[t[19]||(t[19]=e("label",{class:"form-label"},"Название",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.name=a),type:"text",class:"form-control",required:"",placeholder:"Введите название"},null,512),[[x,o.value.name]])]),e("div",ue,[t[20]||(t[20]=e("label",{class:"form-label"},"Описание",-1)),d(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.description=a),class:"form-control",rows:"3",placeholder:"Введите описание"},null,512),[[x,o.value.description]])]),e("div",ve,[t[22]||(t[22]=e("label",{class:"form-label"},"Категория",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.category=a),class:"form-select",required:""},t[21]||(t[21]=[e("option",{value:""},"Выберите категорию",-1),e("option",{value:"category1"},"Категория 1",-1),e("option",{value:"category2"},"Категория 2",-1),e("option",{value:"category3"},"Категория 3",-1)]),512),[[h,o.value.category]])]),e("div",me,[e("div",be,[d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.is_active=a),class:"form-check-input",type:"checkbox",id:"createActive"},null,512),[[T,o.value.is_active]]),t[23]||(t[23]=e("label",{class:"form-check-label",for:"createActive"}," Активен ",-1))])]),e("div",pe,[e("button",{type:"button",onClick:f,class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",class:"btn btn-primary",disabled:p.value},[t[24]||(t[24]=e("i",{class:"bi bi-plus-circle me-1"},null,-1)),r(" "+c(p.value?"Создание...":"Создать"),1)],8,ye)])],32)])])])])):_("",!0),I.value?(b(),m("div",{key:1,class:"modal fade show d-block",tabindex:"-1",style:{background:"rgba(0,0,0,0.5)"},onClick:g},[e("div",{class:"modal-dialog modal-dialog-centered",onClick:t[10]||(t[10]=k(()=>{},["stop"]))},[e("div",fe,[e("div",{class:"modal-header"},[t[25]||(t[25]=e("h5",{class:"modal-title"},[e("i",{class:"bi bi-pencil me-2"}),r(" Редактировать элемент ")],-1)),e("button",{type:"button",class:"btn-close",onClick:g})]),e("div",ge,[v.value?(b(),m("div",_e,[e("pre",ke,c(v.value),1)])):_("",!0),e("form",{onSubmit:k(q,["prevent"])},[e("div",xe,[t[26]||(t[26]=e("label",{class:"form-label"},"Название",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>n.value.name=a),type:"text",class:"form-control",required:""},null,512),[[x,n.value.name]])]),e("div",we,[t[27]||(t[27]=e("label",{class:"form-label"},"Описание",-1)),d(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>n.value.description=a),class:"form-control",rows:"3"},null,512),[[x,n.value.description]])]),e("div",Ce,[t[29]||(t[29]=e("label",{class:"form-label"},"Категория",-1)),d(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>n.value.category=a),class:"form-select",required:""},t[28]||(t[28]=[e("option",{value:"category1"},"Категория 1",-1),e("option",{value:"category2"},"Категория 2",-1),e("option",{value:"category3"},"Категория 3",-1)]),512),[[h,n.value.category]])]),e("div",Ae,[e("div",Ie,[d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>n.value.is_active=a),class:"form-check-input",type:"checkbox",id:"editActive"},null,512),[[T,n.value.is_active]]),t[30]||(t[30]=e("label",{class:"form-check-label",for:"editActive"}," Активен ",-1))])]),e("div",Ve,[e("button",{type:"button",onClick:g,class:"btn btn-secondary"}," Отмена "),e("button",{type:"submit",class:"btn btn-primary",disabled:y.value},[t[31]||(t[31]=e("i",{class:"bi bi-check-circle me-1"},null,-1)),r(" "+c(y.value?"Сохранение...":"Сохранить"),1)],8,he)])],32)])])])])):_("",!0)])}}}),Me=z(Te,[["__scopeId","data-v-3ee0cf32"]]);export{Me as default};
